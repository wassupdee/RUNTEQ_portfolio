<%= form_with model: @profile, data: { turbo: false } do |profile_form| %>
  <%= render 'shared/error_messages', model: profile_form.object %>

  <%= profile_form.label :name, '名前' %>
  <%= profile_form.text_field :name %>

  <%= profile_form.label :furigana, 'フリガナ' %>
  <%= profile_form.text_field :furigana %>

  <% @profile.events.each do |event| %>
    <%= profile_form.fields_for :events, event do |event_form| %>
      <% if event.name == '誕生日' %>
        <%= event_form.label :date, event.name %>
        <%= event_form.date_field :date %>
        <%= event_form.hidden_field :name, value: event.name %>
      <% else %>
        <%= event_form.text_field :name, placeholder: event.name %>
        <%= event_form.date_field :date %>
      <% end %>
    <% end %>
  <% end %>

  <%= profile_form.label :phone, '電話番号' %>
  <%= profile_form.text_field :phone %>

  <%= profile_form.label :email, 'メールアドレス' %>
  <%= profile_form.text_field :email %>

  <%= profile_form.label :line_name, 'LINEの名前' %>
  <%= profile_form.text_field :line_name %>

  <%= profile_form.label :birthplace, '出身地' %>
  <%= profile_form.text_field :birthplace %>

  <%= profile_form.label :address, '住所' %>
  <%= profile_form.text_field :address %>

  <%= profile_form.label :occupation, '職場' %>
  <%= profile_form.text_field :occupation %>

  <%= profile_form.submit '更新する' %>
<% end %>